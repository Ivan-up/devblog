window.addEventListener('load', 	function() {		var uploader = new FileUploader( {			message_error: 'Ошибка загрузки файла', 			form: 'fileloaded',			formfiles: 'files',			uploadid: '',			uploadscript: location.BASE_URL + 'index.php?c=ajax&action=uploadVideo',			portion: 1024*1024*2,		});		var modal = $("#status_load");				document.querySelector('#btnSubmit').addEventListener ('click', 			function(e){				var file = document.querySelector('#files').files[0];				var title = document.querySelector('#title').value;				var labelt = document.querySelector('label[for="title"]').innerHTML;				e.preventDefault();														if (!title) {					alert('Поле "' + labelt + '" обязательно для заполнения');					return;				}								if (!file) {					alert('Вы не выбрали файл!!!');					return;				}								if (!file.name.match(/^.+\.(mp4)$/)){					alert(file.name + ' Данный файл не может быть загружен на сервер. Допустимые форматы(mp4)');					return;				}								if (file.size > 225000000) {					alert('Слишком большой файл, места мало, не более 200мб');					return;				}				var xhr = new XMLHttpRequest();				var data = 'name=' + file.name;												xhr.addEventListener("readystatechange", function(){										if (xhr.readyState == 4) {						console.log(xhr.responseText);						if (xhr.responseText == 1) {							uploader.Upload();							modal.modal({								keyboard: false,								backdrop: 'static'							})						}						else {							alert(xhr.responseText + 'Не удалось загрузить файл');						}					}				});								xhr.open("post", location.BASE_URL + "index.php?c=video&action=upload#" + (new Date()).getTime(), true);				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");				xhr.send(data);			});						uploader.onSuccess = function(){				modal.modal('hide')				document.querySelector('#files').value = '';				document.querySelector('#fileloaded').submit();			}	});